<!DOCTYPE html><html><head><meta name="viewport" content="width=device-width, initial-scale=1" class="jsx-3747868491 next-head"/><meta charSet="utf-8" class="jsx-3747868491 next-head"/><title class="jsx-3747868491 next-head">Kameron</title><meta name="description" content="
Prerequisites

*   [Node.js](https://nodejs.org/en/) Installed
*   [A code editor](https://code.visualstudio.com/)

## Getting Started

In order to scrape a website in 2020 we need to make sure we&#x27;re" class="jsx-3747868491 next-head"/><meta property="og:title" content="Getting Started with Puppeteer" class="next-head"/><meta property="og:site_name" content="https://kamerontanseli.github.io/" class="next-head"/><meta property="og:url" content="https://kamerontanseli.github.io/blog/how-to-use-puppeteer-to-scrape-sites" class="next-head"/><meta property="og:description" content="
Prerequisites

*   [Node.js](https://nodejs.org/en/) Installed
*   [A code editor](https://code.visualstudio.com/)

## Getting Started

In order to scrape a website in 2020 we need to make sure we&#x27;re" class="next-head"/><meta property="og:type" content="article" class="next-head"/><meta property="og:image" content="../static/posts/5b2d227f688967b0997ea7d0a0a4080f.png" class="next-head"/><link rel="preload" href="/_next/static/sKigvmBxHeR5ojdFW8lLh/pages/blog/[slug].js" as="script"/><link rel="preload" href="/_next/static/sKigvmBxHeR5ojdFW8lLh/pages/_app.js" as="script"/><link rel="preload" href="/_next/static/runtime/webpack-e1f7b6ddb3fae2db1f5d.js" as="script"/><link rel="preload" href="/_next/static/chunks/commons.0647a33e7070b3b816f2.js" as="script"/><link rel="preload" href="/_next/static/runtime/main-f116230a2e83c52060c3.js" as="script"/><style id="__jsx-3747868491">@import url("https://fonts.googleapis.com/css?family=Work+Sans&display=swap");*{box-sizing:inherit;}html{box-sizing:border-box;overflow-y:scroll;}body{margin:0;font-family:"Work Sans","Helvetica Neue",Helvetica,sans-serif;overflow-x:hidden;color:#000;font-size:16px;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;}a{-webkit-text-decoration:none;text-decoration:none;color:inherit;-webkit-transition:opacity 0.2s ease;transition:opacity 0.2s ease;}a:hover{-webkit-transition:opacity 0.2s ease;transition:opacity 0.2s ease;opacity:0.5;-webkit-text-decoration-color:inherit;text-decoration-color:inherit;}ul{list-style:none;margin:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;list-style-position:outside;list-style-image:none;}ol{margin:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;list-style-position:outside;list-style-image:none;}ul,ol,p{margin-bottom:1.45rem;}img{max-width:100%;}img,figure,table,fieldset{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.45rem;}pre{margin-left:0;margin-right:0;margin-top:0;margin-bottom:1.45rem;font-size:0.85rem;line-height:1.42;background:hsla(0,0%,0%,0.04);border-radius:3px;overflow:auto;word-wrap:normal;padding:1.45rem;}table{font-size:1rem;line-height:1.45rem;border-collapse:collapse;width:100%;}blockquote{margin-left:1.45rem;margin-right:1.45rem;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.45rem;}strong{font-weight:bold;}li{margin-bottom:calc(1.45rem / 2);}ol li{padding-left:0;}ul li{padding-left:0;}li>ol{margin-left:1.45rem;margin-bottom:calc(1.45rem / 2);margin-top:calc(1.45rem / 2);}li>ul{margin-left:1.45rem;margin-bottom:calc(1.45rem / 2);margin-top:calc(1.45rem / 2);}blockquote *:last-child{margin-bottom:0;}li *:last-child{margin-bottom:0;}p *:last-child{margin-bottom:0;}li>p{margin-bottom:calc(1.45rem / 2);}code{font-size:0.85rem;line-height:1.45rem;}h1,h2,h3,h4,h5,h6,p{font-family:"Work Sans","Helvetica Neue",Helvetica,sans-serif;margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.45rem;color:inherit;text-rendering:optimizeLegibility;}h1,h2{font-weight:500;}h1{font-size:2rem;-webkit-letter-spacing:-1px;-moz-letter-spacing:-1px;-ms-letter-spacing:-1px;letter-spacing:-1px;line-height:1.1875;}h2{font-size:1.7rem;-webkit-letter-spacing:-0.75px;-moz-letter-spacing:-0.75px;-ms-letter-spacing:-0.75px;letter-spacing:-0.75px;line-height:1.2;}h3{font-size:1.2rem;-webkit-letter-spacing:-0.5px;-moz-letter-spacing:-0.5px;-ms-letter-spacing:-0.5px;letter-spacing:-0.5px;line-height:1.1875;color:#a0a0a0;font-weight:normal;}p{font-size:1.2rem;-webkit-letter-spacing:-0.5px;-moz-letter-spacing:-0.5px;-ms-letter-spacing:-0.5px;letter-spacing:-0.5px;line-height:1.5;color:#464646;}@media (min-width:1280px){h1{font-size:2rem;-webkit-letter-spacing:-1px;-moz-letter-spacing:-1px;-ms-letter-spacing:-1px;letter-spacing:-1px;line-height:1.1875;}h2{font-size:1.5rem;-webkit-letter-spacing:-0.75px;-moz-letter-spacing:-0.75px;-ms-letter-spacing:-0.75px;letter-spacing:-0.75px;line-height:1.1667;}h3{font-size:1rem;-webkit-letter-spacing:-0.5px;-moz-letter-spacing:-0.5px;-ms-letter-spacing:-0.5px;letter-spacing:-0.5px;line-height:1.1875;color:#a0a0a0;font-weight:normal;}p{line-height:1.4375;}}</style><style id="__jsx-2864913490">h1.jsx-2864913490{margin-bottom:0;}h1.jsx-2864913490:hover{cursor:pointer;}nav.jsx-2864913490{padding:1.5rem 1.25rem;border-bottom:1px solid #ebebeb;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}@media (min-width:768px){.header.jsx-2864913490{height:100vh;position:fixed;left:0;top:0;}.nav.jsx-2864913490{padding:2rem;width:30vw;height:100%;border-right:1px solid #ebebeb;border-bottom:none;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-align-items:flex-start;-webkit-box-align:flex-start;-ms-flex-align:flex-start;align-items:flex-start;}}</style><style id="__jsx-560623522">.blog.jsx-560623522 h1.jsx-560623522{margin-bottom:0.7rem;}.blog__hero.jsx-560623522{min-height:300px;height:60vh;width:100%;margin:0;overflow:hidden;}.blog__hero.jsx-560623522 img.jsx-560623522{margin-bottom:0;object-fit:cover;min-height:100%;min-width:100%;object-position:center;}.blog__info.jsx-560623522{padding:1.5rem 1.25rem;width:100%;max-width:768px;margin:0 auto;}.blog__info.jsx-560623522 h1.jsx-560623522{margin-bottom:0.66rem;}.blog__info.jsx-560623522 h3.jsx-560623522{margin-bottom:0;}.blog__body.jsx-560623522{width:100%;padding:0 1.25rem;margin:0 auto;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;}.blog__body.jsx-560623522 a{color:#2196f3 !important;}.blog__body.jsx-560623522:last-child{margin-bottom:0;}.blog__body.jsx-560623522 h1.jsx-560623522 h2.jsx-560623522 h3.jsx-560623522 h4.jsx-560623522 h5.jsx-560623522 h6.jsx-560623522 p.jsx-560623522{font-weight:normal;}.blog__body.jsx-560623522 p.jsx-560623522{color:inherit;}.blog__body.jsx-560623522 ul.jsx-560623522{list-style:initial;}.blog__body.jsx-560623522 ul.jsx-560623522 ol.jsx-560623522{margin-left:1.25rem;margin-bottom:1.25rem;padding-left:1.45rem;}.blog__footer.jsx-560623522{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;padding:1.5rem 1.25rem;width:100%;max-width:800px;margin:0 auto;}.blog__footer.jsx-560623522 h2.jsx-560623522{margin-bottom:0;}.blog__footer.jsx-560623522 a.jsx-560623522{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}.blog__footer.jsx-560623522 a.jsx-560623522 svg.jsx-560623522{width:20px;}@media (min-width:768px){.blog.jsx-560623522{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;}.blog__body.jsx-560623522{max-width:800px;padding:0 2rem;}.blog__body.jsx-560623522 span.jsx-560623522{width:100%;margin:1.5rem auto;}.blog__body.jsx-560623522 ul.jsx-560623522 ol.jsx-560623522{margin-left:1.5rem;margin-bottom:1.5rem;}.blog__hero.jsx-560623522{min-height:600px;height:75vh;}.blog__info.jsx-560623522{text-align:center;padding:2rem 0;}.blog__info.jsx-560623522 h1.jsx-560623522{margin:0 auto 0.66rem auto;}.blog__footer.jsx-560623522{padding:2.25rem;}}@media (min-width:1440px){.blog__hero.jsx-560623522{height:70vh;}.blog__info.jsx-560623522{padding:3rem 0;}.blog__footer.jsx-560623522{padding:2rem 2rem 3rem 2rem;}}</style><style id="__jsx-2857272008">.layout.jsx-2857272008{overflow-x:hidden;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;min-height:100vh;}.layout.jsx-2857272008 .info_page.jsx-2857272008{color:#ebebeb;}.content.jsx-2857272008{-webkit-box-flex:1;-webkit-flex-grow:1;-ms-flex-positive:1;flex-grow:1;}@media (min-width:768px){.layout.jsx-2857272008{display:block;}.content.jsx-2857272008{-webkit-box-flex:none;-webkit-flex-grow:none;-ms-flex-positive:none;flex-grow:none;width:70vw;margin-left:30vw;}}</style></head><body><div id="__next"><section style="background-color:undefined;color:false" class="jsx-2857272008 layout false"><header class="jsx-2864913490 header"><nav role="navigation" aria-label="main navigation" class="jsx-2864913490 nav"><a href="/" class="jsx-2864913490"><h1 class="jsx-2864913490">Kameron</h1></a><div class="jsx-2864913490"><a href="/info" class="jsx-2864913490"><h1 class="jsx-2864913490">info</h1></a></div></nav></header><div class="jsx-2857272008 content"><article class="jsx-560623522 blog"><figure class="jsx-560623522 blog__hero"><img src="../static/posts/5b2d227f688967b0997ea7d0a0a4080f.png" alt="blog_hero_Getting Started with Puppeteer" class="jsx-560623522"/></figure><div class="jsx-560623522 blog__info"><h1 class="jsx-560623522">Getting Started with Puppeteer</h1><h3 class="jsx-560623522">Apr 29 2020</h3></div><div class="jsx-560623522 blog__body"><p>Prerequisites</p><ul><li><a href="https://nodejs.org/en/">Node.js</a> Installed</li><li><a href="https://code.visualstudio.com/">A code editor</a></li></ul><h2>Getting Started</h2><p>In order to scrape a website in 2020 we need to make sure we&#x27;re using something that can click, tap and scroll as websites have become a lot more dynamic since 1999.</p><p>Luckily <a href="https://pptr.dev/">Puppeteer</a> is a Node API that allows us to control a <a href="https://www.google.com/chrome/">Google Chrome Browser</a> using simple code commands.</p><p>To get started we need to install Puppeteer:</p><pre><code>npm i puppeteer --save</code></pre><p>Then create a JS file called <code>index.js</code> and import Puppeteer like so:</p><pre><code>const puppeteer = require(&#x27;puppeteer&#x27;);</code></pre><h2>Basic Example</h2><p>Before we do any Puppeteering we need to create an <a href="https://anthonychu.ca/post/async-await-typescript-nodejs/">Async IIFE</a>:</p><pre><code>;(async () =&gt; {
 // code goes here
})();</code></pre><p>This will allow us to write <code>await</code> calls which are needed as the puppeteer API is asynchronous. Now let&#x27;s open and close a browser instance:</p><pre><code>;(async () =&gt; {
  // Opens the browser
  const browser = await puppeteer.launch();
  // Opens a new tab
  const page = await browser.newPage();
    
  // closes the entire browser
  await browser.close();
})();</code></pre><p>Then after we&#x27;ve got our browser setup let&#x27;s navigate the tab we opened to go to <a href="https://news.ycombinator.com/">HackerNews</a>:</p><pre><code>(async () =&gt; {
  const browser = await puppeteer.launch();
  const page = await browser.newPage();
  // navigates the tab to load HN
  await page.goto(&#x27;https://news.ycombinator.com/&#x27;);
  await browser.close();
})();</code></pre><p>Great now that we have a program that can open HackerNews. Let&#x27;s grab the top 10 headlines:</p><pre><code>(async () =&gt; {
  const browser = await puppeteer.launch();
  const page = await browser.newPage();
  await page.goto(&#x27;https://news.ycombinator.com/&#x27;);
  // queries the page and returns an Array of Elements
  const headlines = await page.$$eval(
   &#x27;.storylink&#x27;, 
   // grab the top 10 and get the titles
   stories =&gt; stories.slice(0, 10).map(s =&gt; s.innerText)
  );
  // log to the console
  console.log(headlines.join(&#x27;\n&#x27;))
  await browser.close();
})();</code></pre><p>Our console should now output a result like this:</p><pre><code>Using Reinforcement Learning in the Algorithmic Trading Problem
Show HN: Insomnia Designer – Open-source collaborative editor for API design
What other coronaviruses tell us about SARS-CoV-2
Hacking Together an E-ink Dashboard
Lyft lays off 17% of workforce, furloughs hundreds more
Recovered virus patients retest positive due to &#x27;dead&#x27; virus fragments: experts
Why Segment Went Back to a Monolith
Iron Ox is looking for a DevOps engineer to help scale automated indoor farming
Good writing is a business advantage
Building a WireGuard jail with FreeBSD&#x27;s standard tools</code></pre><h2>Clicking Elements</h2><p>A more advanced example is clicking an element on the page. Luckily with Puppeteer its quite straight forward. Here&#x27;s an example of clicking the upvote button on the front page of HN:</p><pre><code>(async () =&gt; {
  const browser = await puppeteer.launch();
  const page = await browser.newPage();
  // navigates to HN
  await page.goto(&#x27;https://news.ycombinator.com/&#x27;);
  // clicks the first vote arrow on the page
  await page.click(&#x27;.votearrow&#x27;)
  await browser.close();
})();</code></pre></div></article></div></section></div><script id="__NEXT_DATA__" type="application/json">{"dataManager":"[]","props":{"pageProps":{"siteTitle":"Kameron","slug":"how-to-use-puppeteer-to-scrape-sites","content":"\nPrerequisites\n\n*   [Node.js](https://nodejs.org/en/) Installed\n*   [A code editor](https://code.visualstudio.com/)\n\n## Getting Started\n\nIn order to scrape a website in 2020 we need to make sure we're using something that can click, tap and scroll as websites have become a lot more dynamic since 1999.\n\nLuckily [Puppeteer](https://pptr.dev/) is a Node API that allows us to control a [Google Chrome Browser](https://www.google.com/chrome/) using simple code commands.\n\nTo get started we need to install Puppeteer:\n\n    npm i puppeteer --save\n    \n\nThen create a JS file called `index.js` and import Puppeteer like so:\n\n    const puppeteer = require('puppeteer');\n    \n\n## Basic Example\n\nBefore we do any Puppeteering we need to create an [Async IIFE](https://anthonychu.ca/post/async-await-typescript-nodejs/):\n\n    ;(async () =\u003e {\n     // code goes here\n    })();\n    \n\nThis will allow us to write `await` calls which are needed as the puppeteer API is asynchronous. Now let's open and close a browser instance:\n\n    ;(async () =\u003e {\n      // Opens the browser\n      const browser = await puppeteer.launch();\n      // Opens a new tab\n      const page = await browser.newPage();\n        \n      // closes the entire browser\n      await browser.close();\n    })();\n    \n\nThen after we've got our browser setup let's navigate the tab we opened to go to [HackerNews](https://news.ycombinator.com/):\n\n    (async () =\u003e {\n      const browser = await puppeteer.launch();\n      const page = await browser.newPage();\n      // navigates the tab to load HN\n      await page.goto('https://news.ycombinator.com/');\n      await browser.close();\n    })();\n    \n\nGreat now that we have a program that can open HackerNews. Let's grab the top 10 headlines:\n\n    (async () =\u003e {\n      const browser = await puppeteer.launch();\n      const page = await browser.newPage();\n      await page.goto('https://news.ycombinator.com/');\n      // queries the page and returns an Array of Elements\n      const headlines = await page.$$eval(\n       '.storylink', \n       // grab the top 10 and get the titles\n       stories =\u003e stories.slice(0, 10).map(s =\u003e s.innerText)\n      );\n      // log to the console\n      console.log(headlines.join('\\n'))\n      await browser.close();\n    })();\n    \n\nOur console should now output a result like this:\n\n    Using Reinforcement Learning in the Algorithmic Trading Problem\n    Show HN: Insomnia Designer – Open-source collaborative editor for API design\n    What other coronaviruses tell us about SARS-CoV-2\n    Hacking Together an E-ink Dashboard\n    Lyft lays off 17% of workforce, furloughs hundreds more\n    Recovered virus patients retest positive due to 'dead' virus fragments: experts\n    Why Segment Went Back to a Monolith\n    Iron Ox is looking for a DevOps engineer to help scale automated indoor farming\n    Good writing is a business advantage\n    Building a WireGuard jail with FreeBSD's standard tools\n    \n\n## Clicking Elements\n\nA more advanced example is clicking an element on the page. Luckily with Puppeteer its quite straight forward. Here's an example of clicking the upvote button on the front page of HN:\n\n    (async () =\u003e {\n      const browser = await puppeteer.launch();\n      const page = await browser.newPage();\n      // navigates to HN\n      await page.goto('https://news.ycombinator.com/');\n      // clicks the first vote arrow on the page\n      await page.click('.votearrow')\n      await browser.close();\n    })();","data":{"author":"Kameron Tanseli","date":"2020-04-29T20:07:20.000Z","hero_image":"../static/posts/5b2d227f688967b0997ea7d0a0a4080f.png","title":"Getting Started with Puppeteer"},"isEmpty":false,"excerpt":""}},"page":"/blog/[slug]","query":{"slug":"how-to-use-puppeteer-to-scrape-sites"},"buildId":"sKigvmBxHeR5ojdFW8lLh","dynamicBuildId":false,"nextExport":true}</script><script async="" id="__NEXT_PAGE__/blog/[slug]" src="/_next/static/sKigvmBxHeR5ojdFW8lLh/pages/blog/[slug].js"></script><script async="" id="__NEXT_PAGE__/_app" src="/_next/static/sKigvmBxHeR5ojdFW8lLh/pages/_app.js"></script><script src="/_next/static/runtime/webpack-e1f7b6ddb3fae2db1f5d.js" async=""></script><script src="/_next/static/chunks/commons.0647a33e7070b3b816f2.js" async=""></script><script src="/_next/static/runtime/main-f116230a2e83c52060c3.js" async=""></script></body></html>