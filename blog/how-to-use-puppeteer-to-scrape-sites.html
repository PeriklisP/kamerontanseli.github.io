<!DOCTYPE html><html><head><meta name="viewport" content="width=device-width, initial-scale=1" class="jsx-2075253673 next-head"/><meta charSet="utf-8" class="jsx-2075253673 next-head"/><title class="jsx-2075253673 next-head">Getting Started with Puppeteer</title><meta name="description" content="In order to scrape a website in 2020 we need to make sure we&#x27;re using something that can click, tap and scroll as websites have become a lot more dynamic since 1999." class="jsx-2075253673 next-head"/><meta name="twitter:card" content="summary" class="jsx-2075253673 next-head"/><meta name="twitter:site" content="@KameronTanseli" class="jsx-2075253673 next-head"/><meta name="twitter:title" content="Getting Started with Puppeteer" class="jsx-2075253673 next-head"/><meta name="twitter:description" content="In order to scrape a website in 2020 we need to make sure we&#x27;re using something that can click, tap and scroll as websites have become a lot more dynamic since 1999." class="jsx-2075253673 next-head"/><meta name="twitter:creator" content="@KameronTanseli" class="jsx-2075253673 next-head"/><meta name="twitter:image" content="https://kamrn.com/static/meta.png" class="jsx-2075253673 next-head"/><meta property="og:title" content="Getting Started with Puppeteer" class="jsx-2075253673 next-head"/><meta property="og:type" content="article" class="jsx-2075253673 next-head"/><meta property="og:url" content="https://kamrn.com" class="jsx-2075253673 next-head"/><meta property="og:image" content="https://kamrn.com/static/meta.png" class="jsx-2075253673 next-head"/><meta property="og:description" content="In order to scrape a website in 2020 we need to make sure we&#x27;re using something that can click, tap and scroll as websites have become a lot more dynamic since 1999." class="jsx-2075253673 next-head"/><script async="" src="https://www.googletagmanager.com/gtag/js?id=UA-72466279-4" class="jsx-2075253673 next-head"></script><link rel="preload" href="/_next/static/CeXEtZCK_dH_lyNvIwT12/pages/blog/[slug].js" as="script"/><link rel="preload" href="/_next/static/CeXEtZCK_dH_lyNvIwT12/pages/_app.js" as="script"/><link rel="preload" href="/_next/static/runtime/webpack-ec75628763f128f9ddee.js" as="script"/><link rel="preload" href="/_next/static/chunks/commons.fb2d51f5ea79888db098.js" as="script"/><link rel="preload" href="/_next/static/runtime/main-606693b16ac3d77701fe.js" as="script"/><style id="__jsx-2075253673">*{box-sizing:border-box;}html{font-size:100%;}body{background-color:#fff;font-weight:400;font-family:Helvetica;line-height:1.75;color:#000;margin:0;padding:0;}.container{max-width:800px;margin:0 auto;}</style><style id="__jsx-1866064296">.navigation-bg.jsx-1866064296{background-color:#3286b3;}.navigation.jsx-1866064296{padding:1em 2em;display:grid;grid-template-columns:1fr auto;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}.navigation-menu.jsx-1866064296{display:grid;grid-template-columns:repeat(4,1fr);grid-gap:20px;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;text-align:center;}.navigation-logo.jsx-1866064296{-webkit-text-decoration:none;text-decoration:none;color:#fff;font-size:1em;-webkit-letter-spacing:5px;-moz-letter-spacing:5px;-ms-letter-spacing:5px;letter-spacing:5px;}.navigation-link.jsx-1866064296{color:#fff;-webkit-text-decoration:none;text-decoration:none;font-size:0.9em;}@media screen and (max-width:480px){.navigation.jsx-1866064296{grid-template-columns:1fr;grid-gap:10px;}.navigation-menu.jsx-1866064296{text-align:left;grid-template-columns:repeat(4,auto);}}</style><style id="__jsx-525169924">ul.jsx-525169924{display:grid;grid-template-columns:repeat(5,auto);list-style:none;margin:0;padding:1em;}li.jsx-525169924{font-size:0.8em;}a.jsx-525169924{color:#0073a7;}@media screen and (max-width:480px){ul.jsx-525169924{grid-template-columns:repeat(2,auto);}}</style><style id="__jsx-1922407009">.content.jsx-1922407009{padding:2em;}.content-title.jsx-1922407009{margin-top:0;margin-bottom:1em;}.content.jsx-1922407009 blockquote{background-color:#eee;padding:0.5em;margin:0;padding-left:1em;border-left:5px solid grey;}.content.jsx-1922407009 blockquote > p{margin:0;}.content.jsx-1922407009 a{color:#0073a7;}.content.jsx-1922407009 img{max-width:100%;margin:0 auto;display:block;}.content.jsx-1922407009 pre{padding:1em;background-color:#eee;border-radius:4px;}</style></head><body><div id="__next"><div class="jsx-1866064296 navigation-bg"><div class="jsx-1866064296 container"><div class="jsx-1866064296 navigation"><div class="jsx-1866064296 navigation-brand"><a href="/" class="jsx-1866064296 navigation-logo">KAMRN</a></div><div class="jsx-1866064296 navigation-menu"><div class="jsx-1866064296"><a href="/" class="jsx-1866064296 navigation-link">Home</a></div><div class="jsx-1866064296"><a href="/about" class="jsx-1866064296 navigation-link">About</a></div><div class="jsx-1866064296"><a href="/projects" class="jsx-1866064296 navigation-link">Projects</a></div><div class="jsx-1866064296"><a target="_blank" href="https://kameront.substack.com" class="jsx-1866064296 navigation-link">Newsletter</a></div></div></div></div></div><div class="jsx-1922407009 container"><div class="jsx-1922407009 content"><article class="jsx-1922407009"><h1 class="jsx-1922407009 content-title">Getting Started with Puppeteer</h1><p>Prerequisites</p><ul><li><a href="https://nodejs.org/en/">Node.js</a> Installed</li><li><a href="https://code.visualstudio.com/">A code editor</a></li></ul><h2>Getting Started</h2><p>In order to scrape a website in 2020 we need to make sure we&#x27;re using something that can click, tap and scroll as websites have become a lot more dynamic since 1999.</p><p>Luckily <a href="https://pptr.dev/">Puppeteer</a> is a Node API that allows us to control a <a href="https://www.google.com/chrome/">Google Chrome Browser</a> using simple code commands.</p><p>To get started we need to install Puppeteer:</p><pre><code>npm i puppeteer --save</code></pre><p>Then create a JS file called <code>index.js</code> and import Puppeteer like so:</p><pre><code>const puppeteer = require(&#x27;puppeteer&#x27;);</code></pre><h2>Basic Example</h2><p>Before we do any Puppeteering we need to create an <a href="https://anthonychu.ca/post/async-await-typescript-nodejs/">Async IIFE</a>:</p><pre><code>;(async () =&gt; {
 // code goes here
})();</code></pre><p>This will allow us to write <code>await</code> calls which are needed as the puppeteer API is asynchronous. Now let&#x27;s open and close a browser instance:</p><pre><code>;(async () =&gt; {
  // Opens the browser
  const browser = await puppeteer.launch();
  // Opens a new tab
  const page = await browser.newPage();
    
  // closes the entire browser
  await browser.close();
})();</code></pre><p>Then after we&#x27;ve got our browser setup let&#x27;s navigate the tab we opened to go to <a href="https://news.ycombinator.com/">HackerNews</a>:</p><pre><code>(async () =&gt; {
  const browser = await puppeteer.launch();
  const page = await browser.newPage();
  // navigates the tab to load HN
  await page.goto(&#x27;https://news.ycombinator.com/&#x27;);
  await browser.close();
})();</code></pre><p>Great now that we have a program that can open HackerNews. Let&#x27;s grab the top 10 headlines:</p><pre><code>(async () =&gt; {
  const browser = await puppeteer.launch();
  const page = await browser.newPage();
  await page.goto(&#x27;https://news.ycombinator.com/&#x27;);
  // queries the page and returns an Array of Elements
  const headlines = await page.$$eval(
   &#x27;.storylink&#x27;, 
   // grab the top 10 and get the titles
   stories =&gt; stories.slice(0, 10).map(s =&gt; s.innerText)
  );
  // log to the console
  console.log(headlines.join(&#x27;\n&#x27;))
  await browser.close();
})();</code></pre><p>Our console should now output a result like this:</p><pre><code>Using Reinforcement Learning in the Algorithmic Trading Problem
Show HN: Insomnia Designer – Open-source collaborative editor for API design
What other coronaviruses tell us about SARS-CoV-2
Hacking Together an E-ink Dashboard
Lyft lays off 17% of workforce, furloughs hundreds more
Recovered virus patients retest positive due to &#x27;dead&#x27; virus fragments: experts
Why Segment Went Back to a Monolith
Iron Ox is looking for a DevOps engineer to help scale automated indoor farming
Good writing is a business advantage
Building a WireGuard jail with FreeBSD&#x27;s standard tools</code></pre><h2>Clicking Elements</h2><p>A more advanced example is clicking an element on the page. Luckily with Puppeteer its quite straight forward. Here&#x27;s an example of clicking the upvote button on the front page of HN:</p><pre><code>(async () =&gt; {
  const browser = await puppeteer.launch();
  const page = await browser.newPage();
  // navigates to HN
  await page.goto(&#x27;https://news.ycombinator.com/&#x27;);
  // clicks the first vote arrow on the page
  await page.click(&#x27;.votearrow&#x27;)
  await browser.close();
})();</code></pre><iframe src="https://kameront.substack.com/embed" width="100%" height="320" style="border:0" frameBorder="0" scrolling="no" class="jsx-1922407009"></iframe></article></div></div><footer class="jsx-525169924 container"><ul class="jsx-525169924"><li style="color:rgb(161 161 161)" class="jsx-525169924">© Kameron Tanseli 2020</li><li class="jsx-525169924"><a target="_blank" rel="noopener noreferrer" href="https://www.instagram.com/kameron_tanseli" class="jsx-525169924">Instagram</a></li><li class="jsx-525169924"><a target="_blank" rel="noopener noreferrer" href="https://twitter.com/KameronTanseli" class="jsx-525169924">Twitter</a></li><li class="jsx-525169924"><a target="_blank" rel="noopener noreferrer" href="mailto:kamerontanseliwork@gmail.com" class="jsx-525169924">Email</a></li><li class="jsx-525169924"><a target="_blank" rel="noopener noreferrer" href="https://kameront.substack.com/" class="jsx-525169924">Newsletter</a></li></ul></footer></div><script id="__NEXT_DATA__" type="application/json">{"dataManager":"[]","props":{"pageProps":{"post":{"content":"\nPrerequisites\n\n*   [Node.js](https://nodejs.org/en/) Installed\n*   [A code editor](https://code.visualstudio.com/)\n\n## Getting Started\n\nIn order to scrape a website in 2020 we need to make sure we're using something that can click, tap and scroll as websites have become a lot more dynamic since 1999.\n\nLuckily [Puppeteer](https://pptr.dev/) is a Node API that allows us to control a [Google Chrome Browser](https://www.google.com/chrome/) using simple code commands.\n\nTo get started we need to install Puppeteer:\n\n    npm i puppeteer --save\n    \n\nThen create a JS file called `index.js` and import Puppeteer like so:\n\n    const puppeteer = require('puppeteer');\n    \n\n## Basic Example\n\nBefore we do any Puppeteering we need to create an [Async IIFE](https://anthonychu.ca/post/async-await-typescript-nodejs/):\n\n    ;(async () =\u003e {\n     // code goes here\n    })();\n    \n\nThis will allow us to write `await` calls which are needed as the puppeteer API is asynchronous. Now let's open and close a browser instance:\n\n    ;(async () =\u003e {\n      // Opens the browser\n      const browser = await puppeteer.launch();\n      // Opens a new tab\n      const page = await browser.newPage();\n        \n      // closes the entire browser\n      await browser.close();\n    })();\n    \n\nThen after we've got our browser setup let's navigate the tab we opened to go to [HackerNews](https://news.ycombinator.com/):\n\n    (async () =\u003e {\n      const browser = await puppeteer.launch();\n      const page = await browser.newPage();\n      // navigates the tab to load HN\n      await page.goto('https://news.ycombinator.com/');\n      await browser.close();\n    })();\n    \n\nGreat now that we have a program that can open HackerNews. Let's grab the top 10 headlines:\n\n    (async () =\u003e {\n      const browser = await puppeteer.launch();\n      const page = await browser.newPage();\n      await page.goto('https://news.ycombinator.com/');\n      // queries the page and returns an Array of Elements\n      const headlines = await page.$$eval(\n       '.storylink', \n       // grab the top 10 and get the titles\n       stories =\u003e stories.slice(0, 10).map(s =\u003e s.innerText)\n      );\n      // log to the console\n      console.log(headlines.join('\\n'))\n      await browser.close();\n    })();\n    \n\nOur console should now output a result like this:\n\n    Using Reinforcement Learning in the Algorithmic Trading Problem\n    Show HN: Insomnia Designer – Open-source collaborative editor for API design\n    What other coronaviruses tell us about SARS-CoV-2\n    Hacking Together an E-ink Dashboard\n    Lyft lays off 17% of workforce, furloughs hundreds more\n    Recovered virus patients retest positive due to 'dead' virus fragments: experts\n    Why Segment Went Back to a Monolith\n    Iron Ox is looking for a DevOps engineer to help scale automated indoor farming\n    Good writing is a business advantage\n    Building a WireGuard jail with FreeBSD's standard tools\n    \n\n## Clicking Elements\n\nA more advanced example is clicking an element on the page. Luckily with Puppeteer its quite straight forward. Here's an example of clicking the upvote button on the front page of HN:\n\n    (async () =\u003e {\n      const browser = await puppeteer.launch();\n      const page = await browser.newPage();\n      // navigates to HN\n      await page.goto('https://news.ycombinator.com/');\n      // clicks the first vote arrow on the page\n      await page.click('.votearrow')\n      await browser.close();\n    })();","data":{"author":"Kameron Tanseli","date":"2020-04-29T20:07:20.000Z","hero_image":"../static/posts/5b2d227f688967b0997ea7d0a0a4080f.png","title":"Getting Started with Puppeteer","byline":"In order to scrape a website in 2020 we need to make sure we're using something that can click, tap and scroll as websites have become a lot more dynamic since 1999."},"isEmpty":false,"excerpt":""},"slug":"how-to-use-puppeteer-to-scrape-sites"}},"page":"/blog/[slug]","query":{"slug":"how-to-use-puppeteer-to-scrape-sites"},"buildId":"CeXEtZCK_dH_lyNvIwT12","dynamicBuildId":false,"nextExport":true}</script><script async="" id="__NEXT_PAGE__/blog/[slug]" src="/_next/static/CeXEtZCK_dH_lyNvIwT12/pages/blog/[slug].js"></script><script async="" id="__NEXT_PAGE__/_app" src="/_next/static/CeXEtZCK_dH_lyNvIwT12/pages/_app.js"></script><script src="/_next/static/runtime/webpack-ec75628763f128f9ddee.js" async=""></script><script src="/_next/static/chunks/commons.fb2d51f5ea79888db098.js" async=""></script><script src="/_next/static/runtime/main-606693b16ac3d77701fe.js" async=""></script></body></html>