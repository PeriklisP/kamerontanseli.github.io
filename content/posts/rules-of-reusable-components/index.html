<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rules of reusable components</title>
    <link href="https://fonts.googleapis.com/css?family=Roboto:400,400i,500,500i" rel="stylesheet">
    
    <style type="text/css">.article h1{font-size:1.5em}.article a{color:#dec898;text-decoration:none}.article p{line-height:1.5em}.article pre{background-color:#1f2229;padding:10px;overflow:scroll;color:#d3be92;border-radius:4px}.article ol,.article ul{padding-left:20px}.article ol li{color:#fff}.button{text-decoration:none;color:#fff;display:inline-block;padding:15px 20px;background-color:#25272f;border-radius:4px;box-shadow:0 1px 0 1px #14151b;transition:all .4s ease-in-out}.button:hover{background-color:#2b2e38}.button:active{box-shadow:inset 0 1px 0 1px #14151b;background-color:#15161b}.container{max-width:900px;margin:0 auto}@media screen and (max-width:900px){.container{width:95%}}.divider{margin:20px 0;border:1px solid #25272f}body,html{margin:0;padding:0;font-family:Roboto,-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,Oxygen,Ubuntu,Cantarell,'Open Sans','Helvetica Neue',sans-serif;background-color:#2e323d}h1,h2,h3,h4,h5,h6,p{color:#dadada;margin:20px 0}h1{font-weight:700;line-height:1.25em}h2,h3{font-weight:100;line-height:1.5em}.navigation{margin:0;padding:0;list-style:none;display:flex;align-items:center;background-color:#262931}.navigation__item{display:inline-flex}.navigation__item--brand{flex-grow:1}.navigation__link{padding:20px;text-decoration:none;color:#fff;font-weight:300;transition:opacity .4s ease-in-out}.navigation__link:hover{opacity:.7}.navigation__link>span{position:relative;top:2px}.post__title{color:#dec898;text-decoration:none;font-weight:200}</style>
  </head>
  <body> 
    <nav>
      <ul class="navigation">
        <li class="navigation__item navigation__item--brand">
          <a href="/" class="navigation__link"><span>ðŸ˜„</span> Kameron Tanseli</a>
        </li>
      </ul>
    </nav>
    <div class="container">
      
<article class="article">
  <h1>Rules of reusable components</h1>
<p>I spend a lot of my time developing new reusable UI components.</p>
<p>This means during development I tend to extract UI components that are placed in a shared library or styleguide.</p>
<p>These components are reused throughout the entire project. Often having different styles or layouts when integrated into features.</p>
<p>Along the way I learnt a few rules that helped me save time and pain.</p>
<h2>1. Keep the layout fluid</h2>
<p>I can't count the amount of times a component has had a fixed width and that has affected a responsive design. Meaning I have to go in and fiddle with the existing props that were set up in place for another feature somewhere in the site. Not good.</p>
<p>By keeping the component <code>100% width</code> you pass the layout responsibility up to the parent component.</p>
<p>For example its a lot easier to use <code>CardOne</code> over <code>CardTwo</code>. As <code>CardOne</code> will respond to the parent's column changes when the screen size changes.</p>
<pre><code class="language-jsx">const CardOne = ({ title }) =&gt; (
  &lt;div style=&gt;{title}&lt;/div&gt;
);

const CardTwo = ({ title }) =&gt; (
  &lt;div style=&gt;
    {title}
  &lt;/div&gt;
);

const App = () =&gt; (
  &lt;div className=&quot;row&quot;&gt;
    &lt;div className=&quot;col-md-6&quot;&gt;
      &lt;CardOne title=&quot;I'm Fluid&quot; /&gt;
    &lt;/div&gt;
    &lt;div className=&quot;col-md-6&quot;&gt;
      &lt;CardTwo title=&quot;I will break this layout&quot; /&gt;
    &lt;/div&gt;
  &lt;/div&gt;
);
</code></pre>
<h2>2. Allow extra props to be passed</h2>
<p>Turns out that your Button component needs a specific data attribute to work with this library your using for one of your specific features. To bad that the <code>Button</code> component only allows <code>className</code>, <code>children</code> and <code>onClick</code>.</p>
<p>How can we fix this?</p>
<p><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Spread_syntax">Modern ES6 JavaScript allows you to spread function parameters and objects</a>. This can be used to feed props to components.</p>
<pre><code class="language-jsx">// Before -&gt; &lt;button className=&quot;button&quot;&gt;Click me&lt;/button&gt;

const Button = ({ children, className, onClick }) =&gt; (
  &lt;button onClick={onClick} className={`${styles.button} ${className || &quot;&quot;}`}&gt;
    {children}
  &lt;/button&gt;
);

// After -&gt; &lt;button className=&quot;button&quot; data-theme=&quot;dark&quot;&gt;Click me&lt;/button&gt;

const Button = ({ className, ...props }) =&gt; (
  &lt;button className={`${styles.button} ${className || &quot;&quot;}`} {...props} /&gt;
);

// Example

const App = ({ onActivate }) =&gt; (
  &lt;SpecificFeature&gt;
    &lt;Button data-theme=&quot;dark&quot; onClick={onActivate}&gt;
      Click me
    &lt;/Button&gt;
  &lt;/SpecificFeature&gt;
);
</code></pre>
<h2>3. Push logic upwards / Keep it dumb</h2>
<p>One of the top things that prevents reusability is when stateful logic specific to a feature is implemented within a reusable component.</p>
<p>Imagine you have a <code>Dropdown</code> component. That you have used in your navigation when a link is clicked.</p>
<pre><code class="language-jsx">const DropdownItem = ({ className, ...props }) =&gt; (
  &lt;li className={`dropdown-item ${className || &quot;&quot;}`} {...props} /&gt;
);

class Dropdown extends React.Component {
  state = { toggled: false };

  toggle = () =&gt; this.setState(state =&gt; ({ toggled: !state.toggled }));

  render() {
    return (
      &lt;div className=&quot;navbar-link&quot;&gt;
        &lt;span onClick={this.toggle}&gt; {this.props.title} &lt;/span&gt;
        {this.state.toggled &amp;&amp; (
          &lt;ul className=&quot;dropdown&quot;&gt; {this.props.children} &lt;/ul&gt;
        )}
      &lt;/div&gt;
    );
  }
}

const Navbar = () =&gt; (
  &lt;div className=&quot;navbar&quot;&gt;
    &lt;div className=&quot;navbar-brand&quot;&gt;Example&lt;/div&gt;
    &lt;ul className=&quot;navbar-menu&quot;&gt;
      &lt;Dropdown title=&quot;My Account&quot;&gt;
        &lt;DropdownItem&gt;One&lt;/DropdownItem&gt;
        &lt;DropdownItem&gt;Two&lt;/DropdownItem&gt;
      &lt;/Dropdown&gt;
    &lt;/ul&gt;
  &lt;/div&gt;
);
</code></pre>
<p>The problem above is:</p>
<ol>
<li>
<p><code>Dropdown</code> handles the logic for opening and closing the dropdown. Making it a lot harder to reuse <code>Dropdown</code> for more complicated scenarios (e.g: only open the dropdown when a request is successful).</p>
</li>
<li>
<p><code>Dropdown</code> has markup that relates to the <code>Navbar</code> component.</p>
</li>
</ol>
<p>If we refactor the <code>Dropdown</code> component to push the logic up. We end up with a much more reusable <code>Dropdown</code> component.</p>
<pre><code class="language-jsx">const DropdownItem = ({ className, ...props }) =&gt; (
  &lt;li className={`dropdown-item ${className || &quot;&quot;}`} {...props} /&gt;
);

const Dropdown = ({ className, ...props }) =&gt; (
  &lt;ul className={`dropdown ${className || &quot;&quot;}`} {...props} /&gt;
);

class Navbar extends React.Component {
  state = { showUserOptions: false };

  toggleOptions = () =&gt;
    this.setState(state =&gt; ({
      showUserOptions: !state.showUserOptions
    }));

  render() {
    return (
      &lt;div className=&quot;navbar&quot;&gt;
        &lt;div className=&quot;navbar-brand&quot;&gt;Example&lt;/div&gt;
        &lt;ul className=&quot;navbar-menu&quot;&gt;
          &lt;div className=&quot;navbar-link&quot;&gt;
            &lt;span onClick={this.toggleOptions}&gt;My Account&lt;/span&gt;
            {this.state.showUserOptions &amp;&amp; (
              &lt;Dropdown&gt;
                &lt;DropdownItem&gt;One&lt;/DropdownItem&gt;
                &lt;DropdownItem&gt;Two&lt;/DropdownItem&gt;
              &lt;/Dropdown&gt;
            )}
          &lt;/div&gt;
        &lt;/ul&gt;
      &lt;/div&gt;
    );
  }
}
</code></pre>
<h3>Summary</h3>
<p>Keep the component layout fluid.</p>
<p>Allows extra props to be passed into the component.</p>
<p>Keep logic out of them as much as possible.</p>
 
</article>
 
    </div>
  </body>
</html>
